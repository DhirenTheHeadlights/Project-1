\doxysection{Ship\+Cannon\+Handler\+\_\+\+PG.\+cpp}
\hypertarget{_ship_cannon_handler___p_g_8cpp_source}{}\label{_ship_cannon_handler___p_g_8cpp_source}\index{C:/Users/Dhiren/source/repos/DhirenTheHeadlights/Project-\/1/PirateGame/Resource/ShipCannonHandler\_PG.cpp@{C:/Users/Dhiren/source/repos/DhirenTheHeadlights/Project-\/1/PirateGame/Resource/ShipCannonHandler\_PG.cpp}}
\mbox{\hyperlink{_ship_cannon_handler___p_g_8cpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00001}00001\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_ship_cannon_handler___p_g_8h}{shipCannonHandler\_PG.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00002}00002\ }
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00003}00003\ \textcolor{keyword}{using\ namespace\ }\mbox{\hyperlink{namespace_pirate_game}{PirateGame}};}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00004}00004\ }
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00005}\mbox{\hyperlink{class_pirate_game_1_1_ship_cannon_handler_a71aa3cdcd3065dda3bfd37ed49096447_a71aa3cdcd3065dda3bfd37ed49096447}{00005}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_pirate_game_1_1_ship_cannon_handler_a71aa3cdcd3065dda3bfd37ed49096447_a71aa3cdcd3065dda3bfd37ed49096447}{ShipCannonHandler::shootCannonballs}}(\textcolor{keywordtype}{int}\ numCannons,\ sf::Vector2f\ targetPos)\ \{}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00006}00006\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{class_pirate_game_1_1_ship_cannon_handler_a33931731f15748cde471e96a14de365b_a33931731f15748cde471e96a14de365b}{cannonCooldownClock}}.getElapsedTime().asSeconds()\ <\ \mbox{\hyperlink{class_pirate_game_1_1_ship_cannon_handler_a395193a4e2ddfdbaa39940c59e4d78d5_a395193a4e2ddfdbaa39940c59e4d78d5}{cooldown}})\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00007}00007\ }
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00008}00008\ \ \ \ \ \textcolor{comment}{//\ Grab\ the\ cannon\ direction}}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00009}00009\ \ \ \ \ sf::Vector2f\ \mbox{\hyperlink{class_pirate_game_1_1_ship_cannon_handler_a01ef3a1a813dada4cf83a49c65f3e5a1_a01ef3a1a813dada4cf83a49c65f3e5a1}{cannonDirection}}\ =\ this-\/>\mbox{\hyperlink{class_pirate_game_1_1_ship_cannon_handler_a01ef3a1a813dada4cf83a49c65f3e5a1_a01ef3a1a813dada4cf83a49c65f3e5a1}{cannonDirection}}(targetPos);}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00010}00010\ }
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00011}00011\ \ \ \ \ \textcolor{comment}{//\ Fire\ the\ cannonballs\ with\ the\ adjusted\ direction}}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00012}00012\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ numCannons;\ i++)\ \{}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00013}00013\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_pirate_game_1_1_cannonball}{Cannonball}}*\ cannonball\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{class_pirate_game_1_1_cannonball}{Cannonball}};}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00014}00014\ \ \ \ \ \ \ \ \ cannonball-\/>\mbox{\hyperlink{class_pirate_game_1_1_cannonball_a6e3b486a2c6d1d81f719e78456634b59_a6e3b486a2c6d1d81f719e78456634b59}{getSprite}}().setTexture(\mbox{\hyperlink{class_pirate_game_1_1_global_texture_handler_abd67dde4db181d4afcdf8c3b1dbcef02_abd67dde4db181d4afcdf8c3b1dbcef02}{GlobalTextureHandler::getInstance}}().getLandMassTextures().getCannonballTexture());}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00015}00015\ \ \ \ \ \ \ \ \ cannonball-\/>\mbox{\hyperlink{class_pirate_game_1_1_cannonball_a6e3b486a2c6d1d81f719e78456634b59_a6e3b486a2c6d1d81f719e78456634b59}{getSprite}}().setScale(\mbox{\hyperlink{class_pirate_game_1_1_ship_cannon_handler_a0a172e793af155a61060305b3cb93247_a0a172e793af155a61060305b3cb93247}{cannonballScale}});}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00016}00016\ \ \ \ \ \ \ \ \ cannonball-\/>\mbox{\hyperlink{class_pirate_game_1_1_cannonball_a0e3202064b8255939f7948afcf94abd4_a0e3202064b8255939f7948afcf94abd4}{setSpeed}}(\mbox{\hyperlink{class_pirate_game_1_1_ship_cannon_handler_a89a1942f8b225a8888dd601f63beccfe_a89a1942f8b225a8888dd601f63beccfe}{cannonballSpeed}});}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00017}00017\ }
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00018}00018\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Considering\ a\ more\ accurate\ position\ calculation\ here\ based\ on\ cannon\ placement}}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00019}00019\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ padding\ =\ 10.f;}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00020}00020\ \ \ \ \ \ \ \ \ cannonball-\/>\mbox{\hyperlink{class_pirate_game_1_1_cannonball_ab12245cdf8f388e4fb2e91ff0bac091a_ab12245cdf8f388e4fb2e91ff0bac091a}{setPos}}(\mbox{\hyperlink{class_pirate_game_1_1_ship_cannon_handler_a9251bb334ecafdaf71eefe74ce7c7c3c_a9251bb334ecafdaf71eefe74ce7c7c3c}{shipSprite}}.getPosition()\ +\ sf::Vector2f(\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}\textcolor{keyword}{>}(i\ *\ padding),\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}\textcolor{keyword}{>}(i\ *\ padding)));}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00021}00021\ \ \ \ \ \ \ \ \ cannonball-\/>\mbox{\hyperlink{class_pirate_game_1_1_cannonball_af51d85792e5c8bf877e91500d107e8e9_af51d85792e5c8bf877e91500d107e8e9}{setVelocity}}(cannonball-\/>\mbox{\hyperlink{class_pirate_game_1_1_cannonball_a5ef928b5ca47ef1da7d8511e48c8ad8b_a5ef928b5ca47ef1da7d8511e48c8ad8b}{getSpeed}}()\ *\ \mbox{\hyperlink{class_pirate_game_1_1_ship_cannon_handler_a01ef3a1a813dada4cf83a49c65f3e5a1_a01ef3a1a813dada4cf83a49c65f3e5a1}{cannonDirection}});}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00022}00022\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_pirate_game_1_1_ship_cannon_handler_a0ac32fc49ddb7d9239d64d818c07f308_a0ac32fc49ddb7d9239d64d818c07f308}{cannonballs}}.push\_back(cannonball);}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00023}00023\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00024}00024\ }
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00025}00025\ \ \ \ \ \textcolor{comment}{//\ Play\ sound\ once\ per\ volley\ if\ numCannons\ >\ 0}}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00026}00026\ \ \ \ \ \textcolor{keywordflow}{if}\ (numCannons\ >\ 0)\ \mbox{\hyperlink{class_pirate_game_1_1_global_sound_manager_afc885196315697a58ce66d83d4cb3008_afc885196315697a58ce66d83d4cb3008}{GlobalSoundManager::getInstance}}().\mbox{\hyperlink{class_pirate_game_1_1_global_sound_manager_a01c210694daf9b56f0846e7bf3c96e99_a01c210694daf9b56f0846e7bf3c96e99}{playSound}}(\mbox{\hyperlink{namespace_pirate_game_ab5b1a6ae9100dc837e2a87ff172d2eb6_ab5b1a6ae9100dc837e2a87ff172d2eb6a1d3c801b03b5a2bfeec9c315569c7a8a}{SoundId::CannonShot}});}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00027}00027\ }
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00028}00028\ \ \ \ \ \textcolor{comment}{//\ Reset\ the\ cooldown\ clock}}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00029}00029\ \ \ \ \ \mbox{\hyperlink{class_pirate_game_1_1_ship_cannon_handler_a33931731f15748cde471e96a14de365b_a33931731f15748cde471e96a14de365b}{cannonCooldownClock}}.restart();}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00030}00030\ \}}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00031}00031\ }
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00032}\mbox{\hyperlink{class_pirate_game_1_1_ship_cannon_handler_a01ef3a1a813dada4cf83a49c65f3e5a1_a01ef3a1a813dada4cf83a49c65f3e5a1}{00032}}\ sf::Vector2f\ \mbox{\hyperlink{class_pirate_game_1_1_ship_cannon_handler_a01ef3a1a813dada4cf83a49c65f3e5a1_a01ef3a1a813dada4cf83a49c65f3e5a1}{ShipCannonHandler::cannonDirection}}(sf::Vector2f\ targetPos)\ \{}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00033}00033\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{float}\ pi\ =\ 3.14159265f;}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00034}00034\ \ \ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{class_pirate_game_1_1_ship_cannon_handler_a30f4bf4b9d72cebb6eb64e1efab49cfe_a30f4bf4b9d72cebb6eb64e1efab49cfe}{aimTowardsMouse}})\ \{}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00035}00035\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ rotationInRadians\ =\ (\mbox{\hyperlink{class_pirate_game_1_1_ship_cannon_handler_a9251bb334ecafdaf71eefe74ce7c7c3c_a9251bb334ecafdaf71eefe74ce7c7c3c}{shipSprite}}.getRotation()\ -\/\ 180.f)\ *\ pi\ /\ 180.f;}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00036}00036\ }
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00037}00037\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Calculate\ the\ direction\ of\ the\ cannon\ and\ normalize\ it}}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00038}00038\ \ \ \ \ \ \ \ \ sf::Vector2f\ \mbox{\hyperlink{class_pirate_game_1_1_ship_cannon_handler_a01ef3a1a813dada4cf83a49c65f3e5a1_a01ef3a1a813dada4cf83a49c65f3e5a1}{cannonDirection}}(cos(rotationInRadians),\ sin(rotationInRadians));}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00039}00039\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ magnitude\ =\ sqrt(\mbox{\hyperlink{class_pirate_game_1_1_ship_cannon_handler_a01ef3a1a813dada4cf83a49c65f3e5a1_a01ef3a1a813dada4cf83a49c65f3e5a1}{cannonDirection}}.x\ *\ \mbox{\hyperlink{class_pirate_game_1_1_ship_cannon_handler_a01ef3a1a813dada4cf83a49c65f3e5a1_a01ef3a1a813dada4cf83a49c65f3e5a1}{cannonDirection}}.x\ +\ \mbox{\hyperlink{class_pirate_game_1_1_ship_cannon_handler_a01ef3a1a813dada4cf83a49c65f3e5a1_a01ef3a1a813dada4cf83a49c65f3e5a1}{cannonDirection}}.y\ *\ \mbox{\hyperlink{class_pirate_game_1_1_ship_cannon_handler_a01ef3a1a813dada4cf83a49c65f3e5a1_a01ef3a1a813dada4cf83a49c65f3e5a1}{cannonDirection}}.y);}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00040}00040\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_pirate_game_1_1_ship_cannon_handler_a01ef3a1a813dada4cf83a49c65f3e5a1_a01ef3a1a813dada4cf83a49c65f3e5a1}{cannonDirection}}\ /=\ magnitude;}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00041}00041\ }
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00042}00042\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_pirate_game_1_1_ship_cannon_handler_a01ef3a1a813dada4cf83a49c65f3e5a1_a01ef3a1a813dada4cf83a49c65f3e5a1}{cannonDirection}}\ *=\ (\mbox{\hyperlink{class_pirate_game_1_1_ship_cannon_handler_ac2f0eba24946c140857eac0d86911c6c_ac2f0eba24946c140857eac0d86911c6c}{side}}\ ==\ \mbox{\hyperlink{namespace_pirate_game_a0614fb747946bfdb2fd1edfbcb23b261_a0614fb747946bfdb2fd1edfbcb23b261a062f77481bfcf177b66d2604558e39fb}{FiringSide::Starboard}})\ ?\ -\/1.f\ :\ 1.f;}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00043}00043\ }
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00044}00044\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_pirate_game_1_1_ship_cannon_handler_a01ef3a1a813dada4cf83a49c65f3e5a1_a01ef3a1a813dada4cf83a49c65f3e5a1}{cannonDirection}};}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00045}00045\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00046}00046\ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00047}00047\ \ \ \ \ \ \ \ \ sf::RenderWindow*\ window\ =\ \mbox{\hyperlink{class_pirate_game_1_1_global_values_a40abd855ad2ca0e405e066ec43502a97_a40abd855ad2ca0e405e066ec43502a97}{GlobalValues::getInstance}}().\mbox{\hyperlink{class_pirate_game_1_1_global_values_ac0271b79e8e02295ca8095a22bfb0ae2_ac0271b79e8e02295ca8095a22bfb0ae2}{getWindow}}();}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00048}00048\ \ \ \ \ \ \ \ \ sf::Vector2f\ shipPos\ =\ \mbox{\hyperlink{class_pirate_game_1_1_ship_cannon_handler_a9251bb334ecafdaf71eefe74ce7c7c3c_a9251bb334ecafdaf71eefe74ce7c7c3c}{shipSprite}}.getPosition();}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00049}00049\ }
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00050}00050\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Calculate\ vector\ from\ ship\ to\ target}}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00051}00051\ \ \ \ \ \ \ \ \ sf::Vector2f\ directionToTarget\ =\ targetPos\ -\/\ shipPos;}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00052}00052\ \ \ \ \ \ \ \ \ directionToTarget\ *=\ (\mbox{\hyperlink{class_pirate_game_1_1_ship_cannon_handler_ac2f0eba24946c140857eac0d86911c6c_ac2f0eba24946c140857eac0d86911c6c}{side}}\ ==\ \mbox{\hyperlink{namespace_pirate_game_a0614fb747946bfdb2fd1edfbcb23b261_a0614fb747946bfdb2fd1edfbcb23b261a062f77481bfcf177b66d2604558e39fb}{FiringSide::Starboard}})\ ?\ -\/1.f\ :\ 1.f;}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00053}00053\ }
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00054}00054\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Calculate\ angle\ from\ ship\ to\ target\ in\ degrees}}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00055}00055\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ angleToMouse\ =\ atan2(directionToTarget.y,\ directionToTarget.x)\ *\ 180\ /\ pi;}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00056}00056\ }
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00057}00057\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Adjust\ angle\ based\ on\ ship\ orientation\ and\ capped\ angle}}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00058}00058\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ shipRotation\ =\ (\mbox{\hyperlink{class_pirate_game_1_1_ship_cannon_handler_a9251bb334ecafdaf71eefe74ce7c7c3c_a9251bb334ecafdaf71eefe74ce7c7c3c}{shipSprite}}.getRotation()\ -\/\ 180);}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00059}00059\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ angleDifference\ =\ angleToMouse\ -\/\ shipRotation;}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00060}00060\ }
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00061}00061\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Ensure\ angleDifference\ is\ within\ -\/180\ to\ 180\ degrees\ for\ correct\ comparison}}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00062}00062\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (angleDifference\ >\ 180)\ angleDifference\ -\/=\ 360;}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00063}00063\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (angleDifference\ <\ -\/180)\ angleDifference\ +=\ 360;}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00064}00064\ }
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00065}00065\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_pirate_game_1_1_ship_cannon_handler_aa29d244395598c2ae6064a74b5cea583_aa29d244395598c2ae6064a74b5cea583}{firingDirectionAngle}}\ =\ angleDifference;\ \textcolor{comment}{//\ This\ value\ is\ grabbed\ by\ the\ enemy\ ship\ input\ handler}}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00066}00066\ }
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00067}00067\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Cap\ the\ angleDifference\ within\ the\ maxAngle}}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00068}00068\ \ \ \ \ \ \ \ \ angleDifference\ =\ std::max(std::min(angleDifference,\ \mbox{\hyperlink{class_pirate_game_1_1_ship_cannon_handler_a5354863fdf8a03f847faec3bb5254a0f_a5354863fdf8a03f847faec3bb5254a0f}{maxFiringAngle}}),\ -\/\mbox{\hyperlink{class_pirate_game_1_1_ship_cannon_handler_a5354863fdf8a03f847faec3bb5254a0f_a5354863fdf8a03f847faec3bb5254a0f}{maxFiringAngle}});}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00069}00069\ }
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00070}00070\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Calculate\ final\ direction\ vector\ based\ on\ capped\ angle}}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00071}00071\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ cappedAngleRadians\ =\ (shipRotation\ +\ angleDifference)\ *\ pi\ /\ 180;}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00072}00072\ \ \ \ \ \ \ \ \ sf::Vector2f\ cappedDirection(cos(cappedAngleRadians),\ sin(cappedAngleRadians));}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00073}00073\ }
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00074}00074\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Normalize\ the\ capped\ direction\ vector}}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00075}00075\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ magnitude\ =\ sqrt(cappedDirection.x\ *\ cappedDirection.x\ +\ cappedDirection.y\ *\ cappedDirection.y);}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00076}00076\ \ \ \ \ \ \ \ \ cappedDirection\ /=\ magnitude;}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00077}00077\ }
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00078}00078\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Invert\ the\ direction\ if\ firing\ from\ the\ starboard\ side}}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00079}00079\ \ \ \ \ \ \ \ \ cappedDirection\ *=\ (\mbox{\hyperlink{class_pirate_game_1_1_ship_cannon_handler_ac2f0eba24946c140857eac0d86911c6c_ac2f0eba24946c140857eac0d86911c6c}{side}}\ ==\ \mbox{\hyperlink{namespace_pirate_game_a0614fb747946bfdb2fd1edfbcb23b261_a0614fb747946bfdb2fd1edfbcb23b261a062f77481bfcf177b66d2604558e39fb}{FiringSide::Starboard}})\ ?\ -\/1.f\ :\ 1.f;}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00080}00080\ }
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00081}00081\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ cappedDirection;}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00082}00082\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00083}00083\ \}}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00084}00084\ }
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00085}\mbox{\hyperlink{class_pirate_game_1_1_ship_cannon_handler_a30be47f3983e72304688fa10e3f85af0_a30be47f3983e72304688fa10e3f85af0}{00085}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_pirate_game_1_1_ship_cannon_handler_a30be47f3983e72304688fa10e3f85af0_a30be47f3983e72304688fa10e3f85af0}{ShipCannonHandler::updateCannonballs}}()\ \{}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00086}00086\ \ \ \ \ \textcolor{keywordtype}{float}\ elapsed\ =\ \mbox{\hyperlink{class_pirate_game_1_1_ship_cannon_handler_aa51d89ee45049d80b68a8df837df3f15_aa51d89ee45049d80b68a8df837df3f15}{deltaTime}}.restart().asSeconds();}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00087}00087\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\ it\ =\ \mbox{\hyperlink{class_pirate_game_1_1_ship_cannon_handler_a0ac32fc49ddb7d9239d64d818c07f308_a0ac32fc49ddb7d9239d64d818c07f308}{cannonballs}}.begin();\ it\ !=\ \mbox{\hyperlink{class_pirate_game_1_1_ship_cannon_handler_a0ac32fc49ddb7d9239d64d818c07f308_a0ac32fc49ddb7d9239d64d818c07f308}{cannonballs}}.end();\ \textcolor{comment}{/*\ no\ increment\ here\ */})\ \{}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00088}00088\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Update\ the\ position\ and\ velocity\ (1\%\ Decay)\ of\ the\ cannonball}}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00089}00089\ \ \ \ \ \ \ \ \ sf::Vector2f\ velocity\ =\ (*it)-\/>getVelocity()\ *\ pow(0.97f,\ elapsed);}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00090}00090\ \ \ \ \ \ \ \ \ (*it)-\/>setVelocity(velocity);}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00091}00091\ \ \ \ \ \ \ \ \ (*it)-\/>setPos((*it)-\/>getPos()\ +\ velocity\ *\ elapsed);}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00092}00092\ }
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00093}00093\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ If\ more\ than\ 2\ seconds\ have\ passed,\ delete\ the\ cannonball}}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00094}00094\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((*it)-\/>getClock().getElapsedTime().asSeconds()\ >\ 2)\ \{}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00095}00095\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{delete}*\ it;\ \textcolor{comment}{//\ delete\ the\ object}}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00096}00096\ \ \ \ \ \ \ \ \ \ \ \ \ it\ =\ \mbox{\hyperlink{class_pirate_game_1_1_ship_cannon_handler_a0ac32fc49ddb7d9239d64d818c07f308_a0ac32fc49ddb7d9239d64d818c07f308}{cannonballs}}.erase(it);}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00097}00097\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00098}00098\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00099}00099\ \ \ \ \ \ \ \ \ \ \ \ \ ++it;}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00100}00100\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00101}00101\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00102}00102\ \}}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00103}00103\ }
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00104}\mbox{\hyperlink{class_pirate_game_1_1_ship_cannon_handler_ac17861b5d7876ef3dfb9479c4f7d9ce7_ac17861b5d7876ef3dfb9479c4f7d9ce7}{00104}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_pirate_game_1_1_ship_cannon_handler_ac17861b5d7876ef3dfb9479c4f7d9ce7_ac17861b5d7876ef3dfb9479c4f7d9ce7}{ShipCannonHandler::drawCannonballs}}()\ \{}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00105}00105\ \ \ \ \ sf::RenderWindow*\ window\ =\ \mbox{\hyperlink{class_pirate_game_1_1_global_values_a40abd855ad2ca0e405e066ec43502a97_a40abd855ad2ca0e405e066ec43502a97}{GlobalValues::getInstance}}().\mbox{\hyperlink{class_pirate_game_1_1_global_values_ac0271b79e8e02295ca8095a22bfb0ae2_ac0271b79e8e02295ca8095a22bfb0ae2}{getWindow}}();}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00106}00106\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\ it\ =\ \mbox{\hyperlink{class_pirate_game_1_1_ship_cannon_handler_a0ac32fc49ddb7d9239d64d818c07f308_a0ac32fc49ddb7d9239d64d818c07f308}{cannonballs}}.begin();\ it\ !=\ \mbox{\hyperlink{class_pirate_game_1_1_ship_cannon_handler_a0ac32fc49ddb7d9239d64d818c07f308_a0ac32fc49ddb7d9239d64d818c07f308}{cannonballs}}.end();\ ++it)\ \{}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00107}00107\ \ \ \ \ \ \ \ \ window-\/>draw((*it)-\/>getSprite());}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00108}00108\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_ship_cannon_handler___p_g_8cpp_source_l00109}00109\ \}}

\end{DoxyCode}
