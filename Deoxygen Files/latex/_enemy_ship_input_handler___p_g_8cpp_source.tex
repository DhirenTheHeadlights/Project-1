\doxysection{Enemy\+Ship\+Input\+Handler\+\_\+\+PG.\+cpp}
\hypertarget{_enemy_ship_input_handler___p_g_8cpp_source}{}\label{_enemy_ship_input_handler___p_g_8cpp_source}\index{C:/Users/Dhiren/source/repos/DhirenTheHeadlights/Project-\/1/PirateGame/Resource/EnemyShipInputHandler\_PG.cpp@{C:/Users/Dhiren/source/repos/DhirenTheHeadlights/Project-\/1/PirateGame/Resource/EnemyShipInputHandler\_PG.cpp}}
\mbox{\hyperlink{_enemy_ship_input_handler___p_g_8cpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{_enemy_ship_input_handler___p_g_8cpp_source_l00001}00001\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_enemy_ship_input_handler___p_g_8h}{EnemyShipInputHandler\_PG.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_enemy_ship_input_handler___p_g_8cpp_source_l00002}00002\ }
\DoxyCodeLine{\Hypertarget{_enemy_ship_input_handler___p_g_8cpp_source_l00003}00003\ \textcolor{keyword}{using\ namespace\ }\mbox{\hyperlink{namespace_pirate_game}{PirateGame}};}
\DoxyCodeLine{\Hypertarget{_enemy_ship_input_handler___p_g_8cpp_source_l00004}00004\ }
\DoxyCodeLine{\Hypertarget{_enemy_ship_input_handler___p_g_8cpp_source_l00005}\mbox{\hyperlink{class_pirate_game_1_1_enemy_ship_input_handler_ace65fc69d78d1fda05946f5458e702e3_ace65fc69d78d1fda05946f5458e702e3}{00005}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_pirate_game_1_1_enemy_ship_input_handler_ace65fc69d78d1fda05946f5458e702e3_ace65fc69d78d1fda05946f5458e702e3}{EnemyShipInputHandler::handleCannonFire}}()\ \{}
\DoxyCodeLine{\Hypertarget{_enemy_ship_input_handler___p_g_8cpp_source_l00006}00006\ \ \ \ \ \textcolor{comment}{//\ Only\ fire\ if\ the\ player\ is\ within\ firingRange}}
\DoxyCodeLine{\Hypertarget{_enemy_ship_input_handler___p_g_8cpp_source_l00007}00007\ \ \ \ \ \textcolor{keywordtype}{float}\ distance\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}\textcolor{keyword}{>}(sqrt(pow(\mbox{\hyperlink{class_pirate_game_1_1_enemy_ship_input_handler_acd36e789c207d92906dfe01a984b07e5_acd36e789c207d92906dfe01a984b07e5}{playerPos}}.x\ -\/\ \mbox{\hyperlink{class_pirate_game_1_1_ship_input_handler_a32b34639aad9f682e41e85e46d804b88_a32b34639aad9f682e41e85e46d804b88}{sprite}}.getPosition().x,\ 2)\ +\ pow(\mbox{\hyperlink{class_pirate_game_1_1_enemy_ship_input_handler_acd36e789c207d92906dfe01a984b07e5_acd36e789c207d92906dfe01a984b07e5}{playerPos}}.y\ -\/\ \mbox{\hyperlink{class_pirate_game_1_1_ship_input_handler_a32b34639aad9f682e41e85e46d804b88_a32b34639aad9f682e41e85e46d804b88}{sprite}}.getPosition().y,\ 2)));}
\DoxyCodeLine{\Hypertarget{_enemy_ship_input_handler___p_g_8cpp_source_l00008}00008\ \ \ \ \ \textcolor{keywordflow}{if}\ (distance\ >\ \mbox{\hyperlink{class_pirate_game_1_1_enemy_ship_input_handler_aadc058b5df6dbaceb54c79863526ec94_aadc058b5df6dbaceb54c79863526ec94}{firingDistance}})\ \{}
\DoxyCodeLine{\Hypertarget{_enemy_ship_input_handler___p_g_8cpp_source_l00009}00009\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{_enemy_ship_input_handler___p_g_8cpp_source_l00010}00010\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_enemy_ship_input_handler___p_g_8cpp_source_l00011}00011\ }
\DoxyCodeLine{\Hypertarget{_enemy_ship_input_handler___p_g_8cpp_source_l00012}00012\ \ \ \ \ \textcolor{keywordtype}{float}\ maxAngle\ =\ \mbox{\hyperlink{class_pirate_game_1_1_ship_input_handler_a0a657f344e364b519e6fc8e48992a889_a0a657f344e364b519e6fc8e48992a889}{SCH}}-\/>\mbox{\hyperlink{class_pirate_game_1_1_ship_cannon_handler_ac65394869eec6e6cb3b9e7c09dacc3e8_ac65394869eec6e6cb3b9e7c09dacc3e8}{getMaxFiringAngle}}();}
\DoxyCodeLine{\Hypertarget{_enemy_ship_input_handler___p_g_8cpp_source_l00013}00013\ }
\DoxyCodeLine{\Hypertarget{_enemy_ship_input_handler___p_g_8cpp_source_l00014}00014\ \ \ \ \ \textcolor{comment}{//\ Check\ if\ the\ angle\ is\ within\ the\ allowed\ firing\ arc}}
\DoxyCodeLine{\Hypertarget{_enemy_ship_input_handler___p_g_8cpp_source_l00015}00015\ \ \ \ \ \textcolor{keywordflow}{if}\ (std::abs(\mbox{\hyperlink{class_pirate_game_1_1_ship_input_handler_a0a657f344e364b519e6fc8e48992a889_a0a657f344e364b519e6fc8e48992a889}{SCH}}-\/>\mbox{\hyperlink{class_pirate_game_1_1_ship_cannon_handler_ad63e8430189bd0f32cbb2c82c7df021a_ad63e8430189bd0f32cbb2c82c7df021a}{getFiringDirectionAngle}}())\ <=\ maxAngle)\ \{}
\DoxyCodeLine{\Hypertarget{_enemy_ship_input_handler___p_g_8cpp_source_l00016}00016\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Player\ is\ within\ the\ firing\ arc,\ so\ determine\ the\ number\ of\ cannons\ to\ fire}}
\DoxyCodeLine{\Hypertarget{_enemy_ship_input_handler___p_g_8cpp_source_l00017}00017\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_pirate_game_1_1_ship_input_handler_aff88afd80a31a74979eab985874535c7_aff88afd80a31a74979eab985874535c7}{numCannons}}\ =\ \mbox{\hyperlink{class_pirate_game_1_1_ship_input_handler_abb876d0820465a041e9b8e177d43a371_abb876d0820465a041e9b8e177d43a371}{baseNumCannons}};}
\DoxyCodeLine{\Hypertarget{_enemy_ship_input_handler___p_g_8cpp_source_l00018}00018\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_enemy_ship_input_handler___p_g_8cpp_source_l00019}00019\ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{\Hypertarget{_enemy_ship_input_handler___p_g_8cpp_source_l00020}00020\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Player\ is\ outside\ the\ firing\ arc,\ so\ prevent\ firing}}
\DoxyCodeLine{\Hypertarget{_enemy_ship_input_handler___p_g_8cpp_source_l00021}00021\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_pirate_game_1_1_ship_input_handler_aff88afd80a31a74979eab985874535c7_aff88afd80a31a74979eab985874535c7}{numCannons}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{_enemy_ship_input_handler___p_g_8cpp_source_l00022}00022\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_enemy_ship_input_handler___p_g_8cpp_source_l00023}00023\ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{_enemy_ship_input_handler___p_g_8cpp_source_l00024}00024\ \ \ \ \ \textcolor{comment}{//\ Fire\ the\ cannons}}
\DoxyCodeLine{\Hypertarget{_enemy_ship_input_handler___p_g_8cpp_source_l00025}00025\ \ \ \ \ \mbox{\hyperlink{class_pirate_game_1_1_ship_input_handler_a0a657f344e364b519e6fc8e48992a889_a0a657f344e364b519e6fc8e48992a889}{SCH}}-\/>\mbox{\hyperlink{class_pirate_game_1_1_ship_cannon_handler_a71aa3cdcd3065dda3bfd37ed49096447_a71aa3cdcd3065dda3bfd37ed49096447}{shootCannonballs}}(\mbox{\hyperlink{class_pirate_game_1_1_ship_input_handler_aff88afd80a31a74979eab985874535c7_aff88afd80a31a74979eab985874535c7}{numCannons}},\ \mbox{\hyperlink{class_pirate_game_1_1_enemy_ship_input_handler_acd36e789c207d92906dfe01a984b07e5_acd36e789c207d92906dfe01a984b07e5}{playerPos}});}
\DoxyCodeLine{\Hypertarget{_enemy_ship_input_handler___p_g_8cpp_source_l00026}00026\ \}}
\DoxyCodeLine{\Hypertarget{_enemy_ship_input_handler___p_g_8cpp_source_l00027}00027\ }
\DoxyCodeLine{\Hypertarget{_enemy_ship_input_handler___p_g_8cpp_source_l00028}\mbox{\hyperlink{class_pirate_game_1_1_enemy_ship_input_handler_a174187762ea12ba1938cbedbe454171c_a174187762ea12ba1938cbedbe454171c}{00028}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_pirate_game_1_1_enemy_ship_input_handler_a174187762ea12ba1938cbedbe454171c_a174187762ea12ba1938cbedbe454171c}{EnemyShipInputHandler::handleCannonAim}}()\ \{}
\DoxyCodeLine{\Hypertarget{_enemy_ship_input_handler___p_g_8cpp_source_l00029}00029\ \ \ \ \ \textcolor{comment}{//\ Set\ the\ manual\ aim\ flag\ to\ true}}
\DoxyCodeLine{\Hypertarget{_enemy_ship_input_handler___p_g_8cpp_source_l00030}00030\ \ \ \ \ \mbox{\hyperlink{class_pirate_game_1_1_ship_input_handler_a0a657f344e364b519e6fc8e48992a889_a0a657f344e364b519e6fc8e48992a889}{SCH}}-\/>\mbox{\hyperlink{class_pirate_game_1_1_ship_cannon_handler_a1bf73c7fa4cd94e56444d46b423f680a_a1bf73c7fa4cd94e56444d46b423f680a}{setFreeAim}}(\textcolor{keyword}{true});}
\DoxyCodeLine{\Hypertarget{_enemy_ship_input_handler___p_g_8cpp_source_l00031}00031\ }
\DoxyCodeLine{\Hypertarget{_enemy_ship_input_handler___p_g_8cpp_source_l00032}00032\ \ \ \ \ \textcolor{comment}{//\ Calculate\ vector\ from\ enemy\ ship\ to\ player\ ship}}
\DoxyCodeLine{\Hypertarget{_enemy_ship_input_handler___p_g_8cpp_source_l00033}00033\ \ \ \ \ sf::Vector2f\ directionVector\ =\ \mbox{\hyperlink{class_pirate_game_1_1_enemy_ship_input_handler_acd36e789c207d92906dfe01a984b07e5_acd36e789c207d92906dfe01a984b07e5}{playerPos}}\ -\/\ \mbox{\hyperlink{class_pirate_game_1_1_ship_input_handler_a32b34639aad9f682e41e85e46d804b88_a32b34639aad9f682e41e85e46d804b88}{sprite}}.getPosition();}
\DoxyCodeLine{\Hypertarget{_enemy_ship_input_handler___p_g_8cpp_source_l00034}00034\ }
\DoxyCodeLine{\Hypertarget{_enemy_ship_input_handler___p_g_8cpp_source_l00035}00035\ \ \ \ \ \textcolor{comment}{//\ Calculate\ angle\ to\ horizontal\ in\ radians}}
\DoxyCodeLine{\Hypertarget{_enemy_ship_input_handler___p_g_8cpp_source_l00036}00036\ \ \ \ \ \textcolor{keywordtype}{float}\ angleToHorizontal\ =\ atan2(directionVector.y,\ directionVector.x);}
\DoxyCodeLine{\Hypertarget{_enemy_ship_input_handler___p_g_8cpp_source_l00037}00037\ }
\DoxyCodeLine{\Hypertarget{_enemy_ship_input_handler___p_g_8cpp_source_l00038}00038\ \ \ \ \ \textcolor{comment}{//\ Convert\ radians\ to\ degrees}}
\DoxyCodeLine{\Hypertarget{_enemy_ship_input_handler___p_g_8cpp_source_l00039}00039\ \ \ \ \ \textcolor{keywordtype}{float}\ angleInDegrees\ =\ angleToHorizontal\ *\ (180.f\ /\ 3.14159f);}
\DoxyCodeLine{\Hypertarget{_enemy_ship_input_handler___p_g_8cpp_source_l00040}00040\ }
\DoxyCodeLine{\Hypertarget{_enemy_ship_input_handler___p_g_8cpp_source_l00041}00041\ \ \ \ \ \textcolor{comment}{//\ Get\ the\ enemy\ ship's\ current\ rotation\ and\ adjust\ it\ to\ the\ same\ 0-\/360\ degree\ range}}
\DoxyCodeLine{\Hypertarget{_enemy_ship_input_handler___p_g_8cpp_source_l00042}00042\ \ \ \ \ \textcolor{keywordtype}{float}\ shipRotation\ =\ fmod(\mbox{\hyperlink{class_pirate_game_1_1_ship_input_handler_a32b34639aad9f682e41e85e46d804b88_a32b34639aad9f682e41e85e46d804b88}{sprite}}.getRotation(),\ 360.f);}
\DoxyCodeLine{\Hypertarget{_enemy_ship_input_handler___p_g_8cpp_source_l00043}00043\ \ \ \ \ \textcolor{keywordflow}{if}\ (shipRotation\ <\ 0)\ shipRotation\ +=\ 360.f;\ \textcolor{comment}{//\ Not\ necessary,\ but\ just\ in\ case}}
\DoxyCodeLine{\Hypertarget{_enemy_ship_input_handler___p_g_8cpp_source_l00044}00044\ }
\DoxyCodeLine{\Hypertarget{_enemy_ship_input_handler___p_g_8cpp_source_l00045}00045\ \ \ \ \ \textcolor{comment}{//\ Adjust\ the\ calculated\ angle\ by\ subtracting\ the\ enemy\ ship's\ rotation}}
\DoxyCodeLine{\Hypertarget{_enemy_ship_input_handler___p_g_8cpp_source_l00046}00046\ \ \ \ \ \textcolor{keywordtype}{float}\ adjustedAngle\ =\ angleInDegrees\ -\/\ shipRotation;}
\DoxyCodeLine{\Hypertarget{_enemy_ship_input_handler___p_g_8cpp_source_l00047}00047\ }
\DoxyCodeLine{\Hypertarget{_enemy_ship_input_handler___p_g_8cpp_source_l00048}00048\ \ \ \ \ \textcolor{comment}{//\ Use\ fmod\ to\ normalize\ the\ adjusted\ angle\ to\ the\ range\ [-\/360,\ 360)}}
\DoxyCodeLine{\Hypertarget{_enemy_ship_input_handler___p_g_8cpp_source_l00049}00049\ \ \ \ \ adjustedAngle\ =\ fmod(adjustedAngle,\ 360.f);}
\DoxyCodeLine{\Hypertarget{_enemy_ship_input_handler___p_g_8cpp_source_l00050}00050\ }
\DoxyCodeLine{\Hypertarget{_enemy_ship_input_handler___p_g_8cpp_source_l00051}00051\ \ \ \ \ \textcolor{comment}{//\ If\ the\ result\ is\ negative,\ add\ 360\ to\ bring\ it\ into\ the\ range\ [0,\ 360)}}
\DoxyCodeLine{\Hypertarget{_enemy_ship_input_handler___p_g_8cpp_source_l00052}00052\ \ \ \ \ \textcolor{keywordflow}{if}\ (adjustedAngle\ <\ 0)\ adjustedAngle\ +=\ 360.f;}
\DoxyCodeLine{\Hypertarget{_enemy_ship_input_handler___p_g_8cpp_source_l00053}00053\ }
\DoxyCodeLine{\Hypertarget{_enemy_ship_input_handler___p_g_8cpp_source_l00054}00054\ \ \ \ \ \textcolor{comment}{//\ Determine\ side\ based\ on\ the\ adjusted\ angle}}
\DoxyCodeLine{\Hypertarget{_enemy_ship_input_handler___p_g_8cpp_source_l00055}00055\ \ \ \ \ \textcolor{keywordflow}{if}\ (adjustedAngle\ >\ 90.f\ \&\&\ adjustedAngle\ <\ 270.f)\ \mbox{\hyperlink{class_pirate_game_1_1_ship_input_handler_ac62ce5142f4c728d8748ff9ec492e7e3_ac62ce5142f4c728d8748ff9ec492e7e3}{getCannonHandler}}()-\/>\mbox{\hyperlink{class_pirate_game_1_1_ship_cannon_handler_aa22816e3fef1adc186731ccc2442bff4_aa22816e3fef1adc186731ccc2442bff4}{setFiringSide}}(\mbox{\hyperlink{namespace_pirate_game_a0614fb747946bfdb2fd1edfbcb23b261_a0614fb747946bfdb2fd1edfbcb23b261a60aaf44d4b562252c04db7f98497e9aa}{FiringSide::Port}});}
\DoxyCodeLine{\Hypertarget{_enemy_ship_input_handler___p_g_8cpp_source_l00056}00056\ \ \ \ \ \textcolor{keywordflow}{else}\ \mbox{\hyperlink{class_pirate_game_1_1_ship_input_handler_ac62ce5142f4c728d8748ff9ec492e7e3_ac62ce5142f4c728d8748ff9ec492e7e3}{getCannonHandler}}()-\/>\mbox{\hyperlink{class_pirate_game_1_1_ship_cannon_handler_aa22816e3fef1adc186731ccc2442bff4_aa22816e3fef1adc186731ccc2442bff4}{setFiringSide}}(\mbox{\hyperlink{namespace_pirate_game_a0614fb747946bfdb2fd1edfbcb23b261_a0614fb747946bfdb2fd1edfbcb23b261a062f77481bfcf177b66d2604558e39fb}{FiringSide::Starboard}});}
\DoxyCodeLine{\Hypertarget{_enemy_ship_input_handler___p_g_8cpp_source_l00057}00057\ \}}
\DoxyCodeLine{\Hypertarget{_enemy_ship_input_handler___p_g_8cpp_source_l00058}00058\ }
\DoxyCodeLine{\Hypertarget{_enemy_ship_input_handler___p_g_8cpp_source_l00059}00059\ }
\DoxyCodeLine{\Hypertarget{_enemy_ship_input_handler___p_g_8cpp_source_l00060}\mbox{\hyperlink{class_pirate_game_1_1_enemy_ship_input_handler_ab2e3dea5e2a8b973fa25888390b5b9f4_ab2e3dea5e2a8b973fa25888390b5b9f4}{00060}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_pirate_game_1_1_enemy_ship_input_handler_ab2e3dea5e2a8b973fa25888390b5b9f4_ab2e3dea5e2a8b973fa25888390b5b9f4}{EnemyShipInputHandler::handleAnchorDrop}}()\ \{}
\DoxyCodeLine{\Hypertarget{_enemy_ship_input_handler___p_g_8cpp_source_l00061}00061\ \ \ \ \ \textcolor{comment}{//...}}
\DoxyCodeLine{\Hypertarget{_enemy_ship_input_handler___p_g_8cpp_source_l00062}00062\ \}}

\end{DoxyCode}
