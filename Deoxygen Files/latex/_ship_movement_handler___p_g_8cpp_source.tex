\doxysection{Ship\+Movement\+Handler\+\_\+\+PG.\+cpp}
\hypertarget{_ship_movement_handler___p_g_8cpp_source}{}\label{_ship_movement_handler___p_g_8cpp_source}\index{C:/Users/Dhiren/source/repos/DhirenTheHeadlights/Project-\/1/PirateGame/Resource/ShipMovementHandler\_PG.cpp@{C:/Users/Dhiren/source/repos/DhirenTheHeadlights/Project-\/1/PirateGame/Resource/ShipMovementHandler\_PG.cpp}}
\mbox{\hyperlink{_ship_movement_handler___p_g_8cpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00001}00001\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_ship_movement_handler___p_g_8h}{ShipMovementHandler\_PG.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00002}00002\ }
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00003}00003\ \textcolor{keyword}{using\ namespace\ }\mbox{\hyperlink{namespace_pirate_game}{PirateGame}};}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00004}00004\ }
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00005}\mbox{\hyperlink{class_pirate_game_1_1_ship_movement_handler_a95a5d40338d075f36b9a86def829dfc5_a95a5d40338d075f36b9a86def829dfc5}{00005}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_pirate_game_1_1_ship_movement_handler_a95a5d40338d075f36b9a86def829dfc5_a95a5d40338d075f36b9a86def829dfc5}{ShipMovementHandler::setInitialPosition}}()\ \{}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00006}00006\ \ \ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{class_pirate_game_1_1_ship_movement_handler_acac27029d1a10328c2bf83df943a159e_acac27029d1a10328c2bf83df943a159e}{getInitialPositionSet}}())\ \{}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00007}00007\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_pirate_game_1_1_ship_movement_handler_ae3f6ba0f881c5327195167a6f098b6e9_ae3f6ba0f881c5327195167a6f098b6e9}{position}}\ =\ \mbox{\hyperlink{class_pirate_game_1_1_ship_movement_handler_a9921d5e04de6073f98013e14c97107a2_a9921d5e04de6073f98013e14c97107a2}{sprite}}.getPosition();}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00008}00008\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_pirate_game_1_1_ship_movement_handler_afe4f7411a4f448679040af1820823619_afe4f7411a4f448679040af1820823619}{initialPositionSet}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00009}00009\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00010}00010\ \}}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00011}00011\ }
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00012}\mbox{\hyperlink{class_pirate_game_1_1_ship_movement_handler_a060b2c8469300f147c387d5814844114_a060b2c8469300f147c387d5814844114}{00012}}\ sf::Vector2f\ \mbox{\hyperlink{class_pirate_game_1_1_ship_movement_handler_a060b2c8469300f147c387d5814844114_a060b2c8469300f147c387d5814844114}{ShipMovementHandler::normalize}}(sf::Vector2f\ vector)\ \{}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00013}00013\ \ \ \ \ \textcolor{keywordtype}{float}\ length\ =\ std::sqrt(vector.x\ *\ vector.x\ +\ vector.y\ *\ vector.y);}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00014}00014\ \ \ \ \ \textcolor{keywordflow}{if}\ (length\ ==\ 0.f)\ \textcolor{keywordflow}{return}\ sf::Vector2f(0.f,\ 0.f);}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00015}00015\ \ \ \ \ \textcolor{keywordflow}{return}\ vector\ /\ length;}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00016}00016\ \}}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00017}00017\ }
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00018}\mbox{\hyperlink{class_pirate_game_1_1_ship_movement_handler_a6b8a7eafd522cce76d6ca7749709deeb_a6b8a7eafd522cce76d6ca7749709deeb}{00018}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_pirate_game_1_1_ship_movement_handler_a6b8a7eafd522cce76d6ca7749709deeb_a6b8a7eafd522cce76d6ca7749709deeb}{ShipMovementHandler::applyBoundaryConstraints}}(sf::Vector2f\&\ position,\ \textcolor{keyword}{const}\ sf::Vector2f\&\ mapSize)\ \{}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00019}00019\ \ \ \ \ \textcolor{keywordtype}{float}\ sizeX\ =\ \mbox{\hyperlink{class_pirate_game_1_1_ship_movement_handler_a9921d5e04de6073f98013e14c97107a2_a9921d5e04de6073f98013e14c97107a2}{sprite}}.getGlobalBounds().width;}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00020}00020\ \ \ \ \ \textcolor{keywordtype}{float}\ sizeY\ =\ \mbox{\hyperlink{class_pirate_game_1_1_ship_movement_handler_a9921d5e04de6073f98013e14c97107a2_a9921d5e04de6073f98013e14c97107a2}{sprite}}.getGlobalBounds().height;}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00021}00021\ }
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00022}00022\ \ \ \ \ \textcolor{comment}{//\ If\ the\ ship\ is\ out\ of\ bounds,\ set\ the\ position\ to\ the\ boundary}}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00023}00023\ \ \ \ \ \mbox{\hyperlink{class_pirate_game_1_1_ship_movement_handler_ae3f6ba0f881c5327195167a6f098b6e9_ae3f6ba0f881c5327195167a6f098b6e9}{position}}.x\ =\ std::max(0.f,\ std::min(\mbox{\hyperlink{class_pirate_game_1_1_ship_movement_handler_ae3f6ba0f881c5327195167a6f098b6e9_ae3f6ba0f881c5327195167a6f098b6e9}{position}}.x,\ mapSize.x\ -\/\ sizeX));}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00024}00024\ \ \ \ \ \mbox{\hyperlink{class_pirate_game_1_1_ship_movement_handler_ae3f6ba0f881c5327195167a6f098b6e9_ae3f6ba0f881c5327195167a6f098b6e9}{position}}.y\ =\ std::max(0.f,\ std::min(\mbox{\hyperlink{class_pirate_game_1_1_ship_movement_handler_ae3f6ba0f881c5327195167a6f098b6e9_ae3f6ba0f881c5327195167a6f098b6e9}{position}}.y,\ mapSize.y\ -\/\ sizeY));}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00025}00025\ \}}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00026}00026\ }
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00027}\mbox{\hyperlink{class_pirate_game_1_1_ship_movement_handler_a75d1275722138cfe2c3b121e4c4a4ef9_a75d1275722138cfe2c3b121e4c4a4ef9}{00027}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_pirate_game_1_1_ship_movement_handler_a75d1275722138cfe2c3b121e4c4a4ef9_a75d1275722138cfe2c3b121e4c4a4ef9}{ShipMovementHandler::updateVelocity}}(\textcolor{keyword}{const}\ sf::Vector2f\&\ direction,\ \textcolor{keywordtype}{float}\ elapsedTime,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{float}\ baseSpeed)\ \{}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00028}00028\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{class_pirate_game_1_1_ship_movement_handler_a816adbf482ad9aaade1a99d0e0859700_a816adbf482ad9aaade1a99d0e0859700}{isColliding}}\ \&\&\ \mbox{\hyperlink{class_pirate_game_1_1_ship_movement_handler_a5d82f89e0e280c9b6dba95aba2ef8a07_a5d82f89e0e280c9b6dba95aba2ef8a07}{speed}}\ >\ 0)\ \mbox{\hyperlink{class_pirate_game_1_1_ship_movement_handler_a5d82f89e0e280c9b6dba95aba2ef8a07_a5d82f89e0e280c9b6dba95aba2ef8a07}{speed}}\ -\/=\ 10.f;}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00029}00029\ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{class_pirate_game_1_1_ship_movement_handler_a8d66b8dad5c7893c758784756b630e8c_a8d66b8dad5c7893c758784756b630e8c}{dropAnchor}})\ \{}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00030}00030\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Calculate\ wind\ effect}}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00031}00031\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_pirate_game_1_1_global_wind_controller}{GlobalWindController}}\&\ windController\ =\ \mbox{\hyperlink{class_pirate_game_1_1_global_wind_controller_acaf541c9731aa4cfc744803f38979e42_acaf541c9731aa4cfc744803f38979e42}{GlobalWindController::getInstance}}();}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00032}00032\ \ \ \ \ \ \ \ \ sf::Vector2f\ windDirection\ =\ \mbox{\hyperlink{class_pirate_game_1_1_ship_movement_handler_a060b2c8469300f147c387d5814844114_a060b2c8469300f147c387d5814844114}{normalize}}(windController.\mbox{\hyperlink{class_pirate_game_1_1_global_wind_controller_a63349efc33e28874977cd6784a2b015b_a63349efc33e28874977cd6784a2b015b}{getWindDirection}}());\ \textcolor{comment}{//\ Ensure\ wind\ direction\ is\ normalized}}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00033}00033\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ windEffect\ =\ \mbox{\hyperlink{class_pirate_game_1_1_ship_movement_handler_a76e63ce57456104350d1653e39173d98_a76e63ce57456104350d1653e39173d98}{dot}}(windDirection,\ direction)\ *\ windController.\mbox{\hyperlink{class_pirate_game_1_1_global_wind_controller_ab97aa89e0efe84793d84626acc9bedbe_ab97aa89e0efe84793d84626acc9bedbe}{getWindSpeed}}();}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00034}00034\ }
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00035}00035\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Gradually\ increase\ the\ speed\ to\ the\ base\ speed,\ multiplied\ by\ the\ wind\ effect}}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00036}00036\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{float}\ acceleration\ =\ std::max(1.f,\ 1.f\ *\ windEffect);\ \textcolor{comment}{//\ The\ acceleration\ factor}}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00037}00037\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{class_pirate_game_1_1_ship_movement_handler_a5d82f89e0e280c9b6dba95aba2ef8a07_a5d82f89e0e280c9b6dba95aba2ef8a07}{speed}}\ <\ (\mbox{\hyperlink{class_pirate_game_1_1_ship_movement_handler_a25aa9fa07cfc0b374ca13add9684ee97_a25aa9fa07cfc0b374ca13add9684ee97}{baseSpeed}}\ +\ windEffect))\ \mbox{\hyperlink{class_pirate_game_1_1_ship_movement_handler_a5d82f89e0e280c9b6dba95aba2ef8a07_a5d82f89e0e280c9b6dba95aba2ef8a07}{speed}}\ +=\ acceleration\ *\ elapsedTime;}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00038}00038\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{class_pirate_game_1_1_ship_movement_handler_a5d82f89e0e280c9b6dba95aba2ef8a07_a5d82f89e0e280c9b6dba95aba2ef8a07}{speed}}\ >\ (\mbox{\hyperlink{class_pirate_game_1_1_ship_movement_handler_a25aa9fa07cfc0b374ca13add9684ee97_a25aa9fa07cfc0b374ca13add9684ee97}{baseSpeed}}\ +\ windEffect))\ \mbox{\hyperlink{class_pirate_game_1_1_ship_movement_handler_a5d82f89e0e280c9b6dba95aba2ef8a07_a5d82f89e0e280c9b6dba95aba2ef8a07}{speed}}\ -\/=\ acceleration\ *\ elapsedTime;}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00039}00039\ }
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00040}00040\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_pirate_game_1_1_ship_movement_handler_a311f80c7db4192b07f9b62a1ff022b65_a311f80c7db4192b07f9b62a1ff022b65}{velocity}}\ =\ sf::Vector2f(direction.x\ *\ \mbox{\hyperlink{class_pirate_game_1_1_ship_movement_handler_a5d82f89e0e280c9b6dba95aba2ef8a07_a5d82f89e0e280c9b6dba95aba2ef8a07}{speed}},\ direction.y\ *\ \mbox{\hyperlink{class_pirate_game_1_1_ship_movement_handler_a5d82f89e0e280c9b6dba95aba2ef8a07_a5d82f89e0e280c9b6dba95aba2ef8a07}{speed}});}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00041}00041\ }
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00042}00042\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Set\ the\ speed\ immediately\ before\ the\ anchor\ is\ dropped}}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00043}00043\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_pirate_game_1_1_ship_movement_handler_ab5c9a79120eb18035a79c923e2d7815f_ab5c9a79120eb18035a79c923e2d7815f}{speedBeforeAnchorDrop}}\ =\ \mbox{\hyperlink{class_pirate_game_1_1_ship_movement_handler_a5d82f89e0e280c9b6dba95aba2ef8a07_a5d82f89e0e280c9b6dba95aba2ef8a07}{speed}};}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00044}00044\ }
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00045}00045\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Set\ the\ anchor\ push\ back\ flag\ to\ be\ false.\ This\ will\ reset\ the\ flag\ so\ it\ can}}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00046}00046\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ be\ set\ to\ true\ again\ if\ the\ anchor\ is\ dropped.}}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00047}00047\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_pirate_game_1_1_ship_movement_handler_a3aa7e11935577781b135c25e51ef4657_a3aa7e11935577781b135c25e51ef4657}{anchorPushBack}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00048}00048\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00049}00049\ }
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00050}00050\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{class_pirate_game_1_1_ship_movement_handler_a8d66b8dad5c7893c758784756b630e8c_a8d66b8dad5c7893c758784756b630e8c}{dropAnchor}})\ \{}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00051}00051\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Gradually\ decrease\ the\ speed\ to\ 0}}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00052}00052\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{float}\ deceleration\ =\ 20.f;\ \textcolor{comment}{//\ The\ deceleration\ factor,\ proportional\ to\ the\ speed}}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00053}00053\ }
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00054}00054\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Here,\ we\ are\ going\ to\ specify\ a\ speed\ value\ that\ will\ be\ subtracted\ from\ the\ speed\ when\ }}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00055}00055\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ the\ speed\ goes\ to\ 0.\ This\ will\ create\ a\ "{}backwards"{}\ effect\ as\ the\ negative\ speed\ will}}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00056}00056\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ slowly\ come\ back\ up\ to\ 0.\ This\ is\ to\ simulate\ the\ ship\ pulling\ back\ from\ the\ anchor.}}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00057}00057\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Anchor\ will\ pull\ back\ more\ if\ the\ ship\ is\ moving\ faster.}}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00058}00058\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{float}\ speedMin\ =\ -\/0.2f\ *\ \mbox{\hyperlink{class_pirate_game_1_1_ship_movement_handler_ab5c9a79120eb18035a79c923e2d7815f_ab5c9a79120eb18035a79c923e2d7815f}{speedBeforeAnchorDrop}};\ }
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00059}00059\ }
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00060}00060\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ The\ reacceleration\ factor,\ also\ proportional\ to\ the\ speed\ before\ anchor\ drop}}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00061}00061\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{float}\ reacceleration\ =\ 0.2f\ *\ \mbox{\hyperlink{class_pirate_game_1_1_ship_movement_handler_ab5c9a79120eb18035a79c923e2d7815f_ab5c9a79120eb18035a79c923e2d7815f}{speedBeforeAnchorDrop}};}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00062}00062\ }
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00063}00063\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{class_pirate_game_1_1_ship_movement_handler_a5d82f89e0e280c9b6dba95aba2ef8a07_a5d82f89e0e280c9b6dba95aba2ef8a07}{speed}}\ >\ 0)\ \mbox{\hyperlink{class_pirate_game_1_1_ship_movement_handler_a5d82f89e0e280c9b6dba95aba2ef8a07_a5d82f89e0e280c9b6dba95aba2ef8a07}{speed}}\ -\/=\ deceleration\ *\ elapsedTime;\ \textcolor{comment}{//\ Gradually\ decrease\ the\ speed\ to\ 0}}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00064}00064\ }
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00065}00065\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (speed\ <\ 0.01f\ \&\&\ !anchorPushBack\ \&\&\ speed\ >\ speedMin)\ \{\ \textcolor{comment}{//\ Start\ pull\ back\ when\ the\ speed\ is\ close\ to\ 0}}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00066}00066\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_pirate_game_1_1_ship_movement_handler_a5d82f89e0e280c9b6dba95aba2ef8a07_a5d82f89e0e280c9b6dba95aba2ef8a07}{speed}}\ -\/=\ deceleration;}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00067}00067\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{class_pirate_game_1_1_ship_movement_handler_a5d82f89e0e280c9b6dba95aba2ef8a07_a5d82f89e0e280c9b6dba95aba2ef8a07}{speed}}\ <\ speedMin)\ \mbox{\hyperlink{class_pirate_game_1_1_ship_movement_handler_a3aa7e11935577781b135c25e51ef4657_a3aa7e11935577781b135c25e51ef4657}{anchorPushBack}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00068}00068\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00069}00069\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{class_pirate_game_1_1_ship_movement_handler_a5d82f89e0e280c9b6dba95aba2ef8a07_a5d82f89e0e280c9b6dba95aba2ef8a07}{speed}}\ <\ 0)\ \mbox{\hyperlink{class_pirate_game_1_1_ship_movement_handler_a5d82f89e0e280c9b6dba95aba2ef8a07_a5d82f89e0e280c9b6dba95aba2ef8a07}{speed}}\ +=\ reacceleration\ *\ elapsedTime;\ \textcolor{comment}{//\ This\ will\ bring\ the\ speed\ back\ up\ to\ 0}}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00070}00070\ }
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00071}00071\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_pirate_game_1_1_ship_movement_handler_a311f80c7db4192b07f9b62a1ff022b65_a311f80c7db4192b07f9b62a1ff022b65}{velocity}}\ =\ sf::Vector2f(direction.x\ *\ \mbox{\hyperlink{class_pirate_game_1_1_ship_movement_handler_a5d82f89e0e280c9b6dba95aba2ef8a07_a5d82f89e0e280c9b6dba95aba2ef8a07}{speed}},\ direction.y\ *\ \mbox{\hyperlink{class_pirate_game_1_1_ship_movement_handler_a5d82f89e0e280c9b6dba95aba2ef8a07_a5d82f89e0e280c9b6dba95aba2ef8a07}{speed}});}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00072}00072\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00073}00073\ }
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00074}00074\ \ \ \ \ \mbox{\hyperlink{class_pirate_game_1_1_ship_movement_handler_ae3f6ba0f881c5327195167a6f098b6e9_ae3f6ba0f881c5327195167a6f098b6e9}{position}}\ +=\ \mbox{\hyperlink{class_pirate_game_1_1_ship_movement_handler_a311f80c7db4192b07f9b62a1ff022b65_a311f80c7db4192b07f9b62a1ff022b65}{velocity}}\ *\ elapsedTime;}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00075}00075\ \}}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00076}00076\ }
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00077}\mbox{\hyperlink{class_pirate_game_1_1_ship_movement_handler_a3fa4b4d0f5f025fc3af31f25aaca37c2_a3fa4b4d0f5f025fc3af31f25aaca37c2}{00077}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_pirate_game_1_1_ship_movement_handler_a3fa4b4d0f5f025fc3af31f25aaca37c2_a3fa4b4d0f5f025fc3af31f25aaca37c2}{ShipMovementHandler::collisionMovement}}(sf::Sprite\&\ collidingSprite)\ \{}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00078}00078\ \ \ \ \ \mbox{\hyperlink{class_pirate_game_1_1_ship_movement_handler_a816adbf482ad9aaade1a99d0e0859700_a816adbf482ad9aaade1a99d0e0859700}{isColliding}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00079}00079\ }
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00080}00080\ \ \ \ \ \textcolor{comment}{//\ Calculate\ the\ normalized\ normal\ vector\ from\ the\ ship's\ center\ to\ the\ colliding\ sprite's\ center}}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00081}00081\ \ \ \ \ sf::Vector2f\ normal\ =\ sf::Vector2f(}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00082}00082\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_pirate_game_1_1_ship_movement_handler_a9921d5e04de6073f98013e14c97107a2_a9921d5e04de6073f98013e14c97107a2}{sprite}}.getPosition().x\ +\ \mbox{\hyperlink{class_pirate_game_1_1_ship_movement_handler_a9921d5e04de6073f98013e14c97107a2_a9921d5e04de6073f98013e14c97107a2}{sprite}}.getGlobalBounds().width\ /\ 2\ -\/}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00083}00083\ \ \ \ \ \ \ \ \ (collidingSprite.getPosition().x\ +\ collidingSprite.getGlobalBounds().width\ /\ 2),}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00084}00084\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_pirate_game_1_1_ship_movement_handler_a9921d5e04de6073f98013e14c97107a2_a9921d5e04de6073f98013e14c97107a2}{sprite}}.getPosition().y\ +\ \mbox{\hyperlink{class_pirate_game_1_1_ship_movement_handler_a9921d5e04de6073f98013e14c97107a2_a9921d5e04de6073f98013e14c97107a2}{sprite}}.getGlobalBounds().height\ /\ 2\ -\/}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00085}00085\ \ \ \ \ \ \ \ \ (collidingSprite.getPosition().y\ +\ collidingSprite.getGlobalBounds().height\ /\ 2)}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00086}00086\ \ \ \ \ );}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00087}00087\ \ \ \ \ normal\ =\ \mbox{\hyperlink{class_pirate_game_1_1_ship_movement_handler_a060b2c8469300f147c387d5814844114_a060b2c8469300f147c387d5814844114}{normalize}}(normal);}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00088}00088\ }
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00089}00089\ \ \ \ \ \textcolor{comment}{//\ Apply\ a\ damping\ factor\ to\ the\ velocity\ to\ simulate\ friction\ and\ prevent\ oscillations}}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00090}00090\ \ \ \ \ sf::Vector2f\ dampedVelocity\ =\ \mbox{\hyperlink{class_pirate_game_1_1_ship_movement_handler_a311f80c7db4192b07f9b62a1ff022b65_a311f80c7db4192b07f9b62a1ff022b65}{velocity}}\ -\/\ normal\ *\ \mbox{\hyperlink{class_pirate_game_1_1_ship_movement_handler_a76e63ce57456104350d1653e39173d98_a76e63ce57456104350d1653e39173d98}{dot}}(\mbox{\hyperlink{class_pirate_game_1_1_ship_movement_handler_a311f80c7db4192b07f9b62a1ff022b65_a311f80c7db4192b07f9b62a1ff022b65}{velocity}},\ normal)\ *\ \mbox{\hyperlink{class_pirate_game_1_1_ship_movement_handler_a6f9ac8d942039e9a48e5ebd9a5c0136e_a6f9ac8d942039e9a48e5ebd9a5c0136e}{dampingFactor}};}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00091}00091\ }
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00092}00092\ \ \ \ \ \textcolor{comment}{//\ Ensure\ the\ ship\ is\ moved\ slightly\ away\ from\ the\ colliding\ object\ to\ prevent\ sticking}}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00093}00093\ \ \ \ \ \mbox{\hyperlink{class_pirate_game_1_1_ship_movement_handler_ae3f6ba0f881c5327195167a6f098b6e9_ae3f6ba0f881c5327195167a6f098b6e9}{position}}\ +=\ normal\ *\ \mbox{\hyperlink{class_pirate_game_1_1_ship_movement_handler_a1b4691b10593581f142d0cf7f987e0e7_a1b4691b10593581f142d0cf7f987e0e7}{separationDistance}};}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00094}00094\ }
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00095}00095\ \ \ \ \ \textcolor{comment}{//\ Update\ the\ ship's\ velocity}}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00096}00096\ \ \ \ \ \mbox{\hyperlink{class_pirate_game_1_1_ship_movement_handler_a311f80c7db4192b07f9b62a1ff022b65_a311f80c7db4192b07f9b62a1ff022b65}{velocity}}\ =\ dampedVelocity;}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00097}00097\ }
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00098}00098\ \ \ \ \ \textcolor{comment}{//\ Additional:\ Ensure\ separation\ based\ on\ direction\ of\ approach}}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00099}00099\ \ \ \ \ \mbox{\hyperlink{class_pirate_game_1_1_ship_movement_handler_a1f5afc292fbc6424810d0742f770e16e_a1f5afc292fbc6424810d0742f770e16e}{ensureSeparation}}(\mbox{\hyperlink{class_pirate_game_1_1_ship_movement_handler_ae3f6ba0f881c5327195167a6f098b6e9_ae3f6ba0f881c5327195167a6f098b6e9}{position}},\ normal,\ collidingSprite);}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00100}00100\ \}}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00101}00101\ }
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00102}\mbox{\hyperlink{class_pirate_game_1_1_ship_movement_handler_a1f5afc292fbc6424810d0742f770e16e_a1f5afc292fbc6424810d0742f770e16e}{00102}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_pirate_game_1_1_ship_movement_handler_a1f5afc292fbc6424810d0742f770e16e_a1f5afc292fbc6424810d0742f770e16e}{ShipMovementHandler::ensureSeparation}}(sf::Vector2f\&\ position,\ \textcolor{keyword}{const}\ sf::Vector2f\&\ normal,\ \textcolor{keyword}{const}\ sf::Sprite\&\ collidingSprite)\ \{}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00103}00103\ \ \ \ \ \textcolor{comment}{//\ Calculate\ a\ push-\/out\ vector\ based\ on\ normal\ and\ ship's\ approach\ direction}}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00104}00104\ \ \ \ \ sf::Vector2f\ pushOutVector\ =\ normal\ *\ \mbox{\hyperlink{class_pirate_game_1_1_ship_movement_handler_adda4cc1a3e0bf8a4b5942da8ae7687a7_adda4cc1a3e0bf8a4b5942da8ae7687a7}{pushOutDistance}};}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00105}00105\ }
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00106}00106\ \ \ \ \ \textcolor{comment}{//\ Check\ the\ direction\ of\ approach\ and\ adjust\ the\ pushOutVector\ accordingly}}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00107}00107\ \ \ \ \ sf::Vector2f\ approachVector\ =\ \mbox{\hyperlink{class_pirate_game_1_1_ship_movement_handler_ae3f6ba0f881c5327195167a6f098b6e9_ae3f6ba0f881c5327195167a6f098b6e9}{position}}\ -\/\ collidingSprite.getPosition();}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00108}00108\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{class_pirate_game_1_1_ship_movement_handler_a76e63ce57456104350d1653e39173d98_a76e63ce57456104350d1653e39173d98}{dot}}(approachVector,\ normal)\ <\ 0)\ \{}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00109}00109\ \ \ \ \ \ \ \ \ pushOutVector\ =\ -\/pushOutVector;\ \textcolor{comment}{//\ Invert\ the\ push-\/out\ direction\ for\ opposite\ approach}}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00110}00110\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00111}00111\ }
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00112}00112\ \ \ \ \ \textcolor{comment}{//\ Apply\ the\ push-\/out\ vector\ to\ position\ to\ ensure\ separation}}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00113}00113\ \ \ \ \ \mbox{\hyperlink{class_pirate_game_1_1_ship_movement_handler_ae3f6ba0f881c5327195167a6f098b6e9_ae3f6ba0f881c5327195167a6f098b6e9}{position}}\ +=\ pushOutVector;}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00114}00114\ \}}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00115}00115\ }
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00116}\mbox{\hyperlink{class_pirate_game_1_1_ship_movement_handler_a3e23dbc766a2c267f7510e60b800871d_a3e23dbc766a2c267f7510e60b800871d}{00116}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_pirate_game_1_1_ship_movement_handler_a3e23dbc766a2c267f7510e60b800871d_a3e23dbc766a2c267f7510e60b800871d}{ShipMovementHandler::addCannonRecoil}}(sf::Vector2f\ direction,\ \textcolor{keywordtype}{float}\ recoil)\ \{}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00117}00117\ \ \ \ \ \textcolor{comment}{//\ Apply\ the\ recoil\ to\ the\ ship's\ position}}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00118}00118\ \ \ \ \ \mbox{\hyperlink{class_pirate_game_1_1_ship_movement_handler_ae3f6ba0f881c5327195167a6f098b6e9_ae3f6ba0f881c5327195167a6f098b6e9}{position}}\ +=\ direction\ *\ recoil;}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00119}00119\ \}}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00120}00120\ }
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00121}00121\ \textcolor{comment}{//\ Helper\ function\ to\ calculate\ dot\ product}}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00122}\mbox{\hyperlink{class_pirate_game_1_1_ship_movement_handler_a76e63ce57456104350d1653e39173d98_a76e63ce57456104350d1653e39173d98}{00122}}\ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{class_pirate_game_1_1_ship_movement_handler_a76e63ce57456104350d1653e39173d98_a76e63ce57456104350d1653e39173d98}{ShipMovementHandler::dot}}(\textcolor{keyword}{const}\ sf::Vector2f\&\ a,\ \textcolor{keyword}{const}\ sf::Vector2f\&\ b)\ \{}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00123}00123\ \ \ \ \ \textcolor{keywordflow}{return}\ a.x\ *\ b.x\ +\ a.y\ *\ b.y;}
\DoxyCodeLine{\Hypertarget{_ship_movement_handler___p_g_8cpp_source_l00124}00124\ \}}

\end{DoxyCode}
